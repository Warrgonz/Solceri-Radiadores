{% extends "layout.html" %}
{% block content %}

<div>
    <h2><strong>Tiquete # {{ tiquete.id_tiquete }}</strong></h2>
    <form id="tiqueteEditarForm" method="POST" action="{{ url_for('tiquetes.tiquete_editar', id=tiquete.id_tiquete) }}" class="row">
        <div class="col-sm-12 col-md-6 col-lg-6">
            <div>
                <label for="id_cliente">Cliente<span>*</span></label>
                <select class="form-select mb-3" id="id_cliente" name="id_cliente" required>
                    <option value="">Seleccione un cliente</option>
                    {% for cliente in clientes %}
                    <option value="{{ cliente.id_usuario }}" {% if cliente.id_usuario == tiquete.id_cliente %}selected{% endif %}>
                        {{ cliente.nombre }} {{ cliente.primer_apellido }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label for="grupo_asignado">Grupo<span>*</span></label>
                <select class="form-select mb-3" id="grupo_asignado" name="grupo_asignado" required>
                    <option value="">Seleccione un grupo</option>
                    {% for grupo in grupos %}
                    <option value="{{ grupo.id_grupo }}" {% if grupo.id_grupo == tiquete.grupo_asignado %}selected{% endif %}>
                        {{ grupo.nombre }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label for="fecha">Fecha<span>*</span></label>
                <input type="text" class="form-control" name="fecha" value="{{ tiquete.fecha_creacion }}" disabled>
            </div>
            <div>
                <label for="trabajador_designado">Colaborador<span>*</span></label>
                <select class="form-select mb-3" id="trabajador_designado" name="trabajador_designado" required>
                    <option value="">Seleccione un colaborador</option>
                    {% for trabajador in trabajadores %}
                    <option value="{{ trabajador.id_usuario }}" {% if trabajador.id_usuario == tiquete.trabajador_designado %}selected{% endif %}>
                        {{ trabajador.nombre }} {{ trabajador.primer_apellido }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label for="resumen">Resumen<span>*</span></label>
                <input type="text" class="form-control" id="resumen" name="resumen" value="{{ tiquete.resumen }}" required>
            </div>
            <div>
                <label for="descripcion">Descripción<span>*</span></label>
                <textarea class="form-control" rows="3" id="descripcion" name="descripcion" required>{{ tiquete.descripcion }}</textarea>
            </div>
            <div class="pt-2">
                <label for="archivos">Adjunte un archivo <strong>(Opcional)</strong></label>
                <input type="file" id="archivo" name="archivos" accept=".pdf, .doc, .docx, .png, .jpg, .webp">
            </div>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-6">
            <div>
                <label for="categoria">Categoría<span>*</span></label>
                <select class="form-select mb-3" id="categoria" name="categoria" required>
                    <option value="">Seleccione una categoría</option>
                    {% for categoria in categorias %}
                    <option value="{{ categoria.id_categoria }}" {% if categoria.id_categoria == tiquete.categoria %}selected{% endif %}>
                        {{ categoria.categoria }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label for="estado">Estado<span>*</span></label>
                <select class="form-select mb-3" id="estado" name="estado" required>
                    <option value="">Seleccione un estado</option>
                    {% for estado in estados %}
                    <option value="{{ estado.id_estado }}" {% if estado.id_estado == tiquete.id_estado %}selected{% endif %}>
                        {{ estado.estado }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label for="direccion">Dirección<span>*</span></label>
                <input type="text" class="form-control" id="direccion" name="direccion" value="{{ tiquete.direccion }}" required>
            </div>
            <div class="pt-3">
                <button type="submit" class="btn btn-success" style="width: 100%;">Guardar</button>
                <a href="{{ url_for('tiquetes.tiquetes_listar') }}"><button type="button" class="btn btn-danger mt-3" style="width: 100%;">Cancelar</button></a>
                <a href=""><button type="button" class="btn-solceri mt-3" style="width: 100%;">Cotizaciones</button></a>
            </div>
        </div>
    </form>

    <div>
        <div class="p-3">
            <h3><strong>Agregar notas</strong></h3>
        </div>
    </div>
    <div>
        <div>
            <label for="nota_interna">Agregar comentarios <strong>(Interno)</strong></label>
            <textarea class="form-control" rows="3" id="nota_interna" name="nota_interna" placeholder="Descripción del servicio"></textarea>
        </div>
        <div class="pt-2">
            <label for="nota_cliente">Agregar comentarios <strong>(Cliente)</strong></label>
            <textarea class="form-control" rows="3" id="nota_cliente" name="nota_cliente" placeholder="Descripción del servicio"></textarea>
        </div>
        <div class="pt-3">
            <button type="button" class="btn-solceri">Enviar</button>
            <button type="button" class="btn btn-danger">Borrar</button>
        </div>
    </div>
    <div>
        <div class="p-3">
            <h3><strong>Correspondencia</strong></h3>
        </div>
        <div>
            <!-- Bloque de comentario -->
            <div class="row profile-tt">
                <div class="col-sm-12 col-md-1 col-lg-1 profile-img-tt">
                    <img src="/static/images/NPC_2.jpg" alt="Usuario Administrador">
                </div>
                <div class="col-sm-12 col-md-11 col-lg-11">
                    <h5>David Gutierrez Ledezma</h5>
                    <p>Este es un comentario de prueba. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                </div>
            </div>
            <!-- Fin del bloque de comentario -->
        </div>
    </div>
</div>

{% endblock %}
