{% extends "layout.html" %}
{% block content %}
<h2>Editar Tiquete</h2>
<form id="tiqueteEditarForm" method="POST" action="{{ url_for('tiquetes.tiquete_editar', id_tiquete=tiquete.id_tiquete) }}">
    <div class="mb-3">
        <label for="resumen" class="form-label">Resumen</label>
        <input type="text" class="form-control" id="resumen" name="resumen" value="{{ tiquete.resumen }}" required>
    </div>
    <div class="mb-3">
        <label for="descripcion" class="form-label">Descripción</label>
        <textarea class="form-control" id="descripcion" name="descripcion" rows="3">{{ tiquete.descripcion }}</textarea>
    </div>
    <div class="mb-3">
        <label for="id_cliente" class="form-label">Cliente</label>
        <select class="form-select" id="id_cliente" name="id_cliente" required>
            {% for cliente in clientes %}
            <option value="{{ cliente.id_usuario }}" {% if cliente.id_usuario == tiquete.id_cliente %}selected{% endif %}>{{ cliente.nombre }} {{ cliente.primer_apellido }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="grupo_asignado" class="form-label">Grupo Asignado</label>
        <select class="form-select" id="grupo_asignado" name="grupo_asignado" required>
            {% for grupo in grupos %}
            <option value="{{ grupo.id_grupo }}" {% if grupo.id_grupo == tiquete.grupo_asignado %}selected{% endif %}>{{ grupo.nombre }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="trabajador_designado" class="form-label">Trabajador Designado</label>
        <select class="form-select" id="trabajador_designado" name="trabajador_designado" required>
            {% for trabajador in trabajadores %}
            <option value="{{ trabajador.id_usuario }}" {% if trabajador.id_usuario == tiquete.trabajador_designado %}selected{% endif %}>{{ trabajador.nombre }} {{ trabajador.primer_apellido }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="categoria" class="form-label">Categoría</label>
        <select class="form-select" id="categoria" name="categoria" required>
            {% for categoria in categorias %}
            <option value="{{ categoria.id_categoria }}" {% if categoria.id_categoria == tiquete.categoria %}selected{% endif %}>{{ categoria.nombre }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="estado" class="form-label">Estado</label>
        <select class="form-select" id="estado" name="estado" required>
            {% for estado in estados %}
            <option value="{{ estado.id_estado }}" {% if estado.id_estado == tiquete.id_estado %}selected{% endif %}>{{ estado.estado }}</option>
            {% endfor %}
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
</form>
{% endblock %}
